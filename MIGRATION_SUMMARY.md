# üéØ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ä–æ–ª–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** (`admin`, `moderator`, `user`)
- ‚úÖ Fallback –Ω–∞ `ADMIN_TELEGRAM_ID` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ API endpoints –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å async —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `@supabase/supabase-js`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è PostgreSQL
- ‚úÖ –°–æ–∑–¥–∞–Ω Supabase –∫–ª–∏–µ–Ω—Ç —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Supabase
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Supabase
1. **`frontend/lib/supabase.ts`** - Supabase –∫–ª–∏–µ–Ω—Ç —Å TypeScript —Ç–∏–ø–∞–º–∏
2. **`frontend/lib/db-supabase.ts`** - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Supabase
3. ‚≠ê **`frontend/database/supabase-full-migration.sql`** - –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Å—Ö–µ–º–∞ + –¥–∞–Ω–Ω—ã–µ)
4. **`frontend/database/supabase-migration.sql`** - –¢–æ–ª—å–∫–æ —Å—Ö–µ–º–∞
5. **`frontend/database/export-to-postgres.sql`** - –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
6. **`frontend/SUPABASE_MIGRATION.md`** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **`data_export.sql`** - –ü–æ–ª–Ω—ã–π –¥–∞–º–ø SQLite –±–∞–∑—ã (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **`frontend/database/README.md`** - –ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- **`frontend/.env.example`** - –û–±–Ω–æ–≤–ª—ë–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ Supabase
- **`MIGRATION_SUMMARY.md`** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
```
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ supabase.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é (–≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç)

**–í–∞—Ä–∏–∞–Ω—Ç A: –í—Å—ë –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø) ‚≠ê**
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase Dashboard
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ frontend/database/supabase-full-migration.sql
3. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
4. –ì–æ—Ç–æ–≤–æ! –°—Ö–µ–º–∞ –∏ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –†–∞–∑–¥–µ–ª—å–Ω–æ**
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ frontend/database/supabase-migration.sql ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ frontend/database/export-to-postgres.sql ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env.local
cp frontend/.env.example frontend/.env.local

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Supabase
```bash
cd frontend/lib
mv db.ts db-sqlite.ts.backup
mv db-supabase.ts db.ts
```

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
cd frontend
npm run dev
```

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### SQLite ‚Üí Supabase
| –¢–∞–±–ª–∏—Ü–∞ | –ó–∞–ø–∏—Å–µ–π | –°—Ç–∞—Ç—É—Å |
|---------|---------|--------|
| users | 1 | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ |
| tournaments | 3 | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ |
| tournament_participants | 16 | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ |
| rounds | 3 | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ |
| matches | 0 | ‚úÖ –ì–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ |

## üéÅ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Supabase

‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - PostgreSQL —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚úÖ **Backup** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã
‚úÖ **Dashboard** - –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
‚úÖ **Security** - Row Level Security (RLS) –∏–∑ –∫–æ—Ä–æ–±–∫–∏
‚úÖ **API** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ REST API
‚úÖ **Real-time** - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º
‚úÖ **Storage** - –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ file storage (–¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ–∏—á)
‚úÖ **Auth** - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

‚ö†Ô∏è **Service Role Key** –æ–±—Ö–æ–¥–∏—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
‚ö†Ô∏è –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ `.env.local` –≤ git
‚ö†Ô∏è –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ (Vercel/Netlify)
‚ö†Ô∏è –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `db-supabase.ts` –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `await`

## üîÑ –û—Ç–∫–∞—Ç –∫ SQLite

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è:
```bash
cd frontend/lib
mv db.ts db-supabase.ts
mv db-sqlite.ts.backup db.ts
```

## üìÇ –ì–¥–µ —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è

```
/Users/dmitry/test_tg_app-1/
‚îú‚îÄ‚îÄ data_export.sql                           # –≠–∫—Å–ø–æ—Ä—Ç SQLite (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ .env.example                          # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts                       # Supabase –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db-supabase.ts                    # –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts                             # –¢–µ–∫—É—â–∏–µ SQLite —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts                       # –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md                         # –ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase-full-migration.sql       # ‚≠ê –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–ò–°–ü–û–õ–¨–ó–£–ô –≠–¢–û!)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase-migration.sql            # –¢–æ–ª—å–∫–æ —Å—Ö–µ–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export-to-postgres.sql            # –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repchess.db                       # SQLite –±–∞–∑–∞
‚îÇ   ‚îî‚îÄ‚îÄ SUPABASE_MIGRATION.md                 # –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îî‚îÄ‚îÄ MIGRATION_SUMMARY.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üèÅ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Supabase
2. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ö–µ–º—ã
3. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env.local`
5. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ `db-supabase.ts`
6. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

**–ì–æ—Ç–æ–≤–æ –∫ production!** üöÄ

–í—Å—è —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞, –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –∫ –º–∏–≥—Ä–∞—Ü–∏–∏.
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ Supabase –∏ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é –∏ —É–¥–æ–±—Å—Ç–≤–æ–º! üí™
